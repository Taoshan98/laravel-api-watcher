import{o as D,f as x,g as y,m as n,q as V,x as u,k as h,l as b,u as s,D as v,y as r,t as _,T,j as e,z,E,b as m}from"./vendor-charts-B6IHGujI.js";import{c as l,u as I}from"./app-DYKFonEC.js";import{T as S}from"./triangle-alert-D0T3cMjp.js";import{C as P}from"./circle-check-big-NKd45fWs.js";import{C as N}from"./clock-B6b_1CIK.js";/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=l("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=l("EyeOffIcon",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=l("EyeIcon",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=l("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=l("ScissorsIcon",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=l("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=l("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),U={class:"space-y-6 animate-[fade-in_0.3s_ease]"},Y={class:"glass-surface overflow-hidden"},G={class:"divide-y divide-border-subtle"},J={class:"flex items-center justify-between px-5 py-4"},K={class:"flex items-center gap-3"},Q={class:"w-8 h-8 rounded-lg bg-success-soft flex items-center justify-center"},W={class:"flex items-center justify-between px-5 py-4"},X={class:"flex items-center gap-3"},$={class:"w-8 h-8 rounded-lg bg-info-soft flex items-center justify-center"},ee={class:"flex items-center gap-2"},te={key:0,class:"badge bg-warning-soft text-warning text-xs"},se={class:"flex items-center justify-between px-5 py-4"},ae={class:"flex items-center gap-3"},re={class:"w-8 h-8 rounded-lg bg-accent-soft flex items-center justify-center"},ne={class:"text-sm text-text-secondary"},le={class:"flex items-center justify-between px-5 py-4"},oe={class:"flex items-center gap-3"},ie={class:"w-8 h-8 rounded-lg bg-accent-soft flex items-center justify-center"},de={class:"text-sm text-text-secondary capitalize"},ce={class:"flex items-center justify-between px-5 py-4"},xe={class:"flex items-center gap-3"},ue={class:"w-8 h-8 rounded-lg bg-warning-soft flex items-center justify-center"},me={class:"text-sm text-text-muted font-mono"},pe={class:"glass-surface overflow-hidden border-danger/20"},fe={class:"divide-y divide-border-subtle"},ye={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 px-5 py-4"},ve={class:"text-sm font-medium text-text-primary flex items-center gap-2"},ge={class:"flex items-center gap-2"},he=["disabled"],be={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 px-5 py-4"},_e={class:"text-sm font-medium text-text-primary flex items-center gap-2"},we=["disabled"],De={__name:"Settings",setup(ke){const{fetchConfig:w,triggerPrune:k,triggerClear:C,loading:g}=I(),a=m({}),d=m(!1),c=m(!1),f=m(30),o=m(null),p=(i,t="success")=>{o.value={message:i,type:t},setTimeout(()=>o.value=null,3e3)},j=async()=>{a.value=await w()},M=async()=>{if(!c.value){c.value=!0;return}try{await k(f.value),p("Requests pruned successfully."),c.value=!1}catch(i){p("Error: "+i.message,"error")}},q=async()=>{if(!d.value){d.value=!0;return}try{await C(),p("All requests cleared."),d.value=!1}catch(i){p("Error: "+i.message,"error")}};return D(j),(i,t)=>(x(),y("div",U,[n(T,{name:"slide-up"},{default:V(()=>[o.value?(x(),y("div",{key:0,class:u(["fixed top-5 right-5 z-50 flex items-center gap-2 px-4 py-3 rounded-xl text-sm font-medium shadow-lg",o.value.type==="error"?"bg-danger text-white":"bg-success text-text-inverted"])},[(x(),h(b(o.value.type==="error"?s(S):s(P)),{class:"w-4 h-4"})),v(" "+r(o.value.message),1)],2)):_("",!0)]),_:1}),t[12]||(t[12]=e("div",null,[e("h1",{class:"text-2xl font-bold text-text-primary"},"Settings"),e("p",{class:"text-sm text-text-muted mt-0.5"},"Configuration and data management")],-1)),e("div",Y,[t[6]||(t[6]=e("div",{class:"px-5 py-4 border-b border-border-subtle"},[e("h3",{class:"text-sm font-semibold text-text-primary"},"Configuration"),e("p",{class:"text-xs text-text-muted mt-0.5"},"Loaded from config/api-watcher.php")],-1)),e("div",G,[e("div",J,[e("div",K,[e("div",Q,[n(s(Z),{class:"w-4 h-4 text-success"})]),t[1]||(t[1]=e("span",{class:"text-sm text-text-primary"},"Enabled",-1))]),e("span",{class:u([a.value.enabled?"bg-success-soft text-success":"bg-danger-soft text-danger","badge text-xs"])},r(a.value.enabled?"Yes":"No"),3)]),e("div",W,[e("div",X,[e("div",$,[(x(),h(b(a.value.record_requests?s(B):s(R)),{class:"w-4 h-4 text-info"}))]),t[2]||(t[2]=e("span",{class:"text-sm text-text-primary"},"Record Requests",-1))]),e("div",ee,[e("span",{class:u([a.value.record_requests?"bg-success-soft text-success":"bg-surface-elevated text-text-muted","badge text-xs"])},r(a.value.record_requests?"All":"None"),3),a.value.failed_only?(x(),y("span",te,"Failed Only")):_("",!0)])]),e("div",se,[e("div",ae,[e("div",re,[n(s(N),{class:"w-4 h-4 text-accent"})]),t[3]||(t[3]=e("span",{class:"text-sm text-text-primary"},"Pruning",-1))]),e("span",ne,r(a.value.pruning_days)+" days",1)]),e("div",le,[e("div",oe,[e("div",ie,[n(s(L),{class:"w-4 h-4 text-accent"})]),t[4]||(t[4]=e("span",{class:"text-sm text-text-primary"},"Storage Driver",-1))]),e("span",de,r(a.value.storage_driver),1)]),e("div",ce,[e("div",xe,[e("div",ue,[n(s(O),{class:"w-4 h-4 text-warning"})]),t[5]||(t[5]=e("span",{class:"text-sm text-text-primary"},"Sensitive Fields",-1))]),e("span",me,r(Array.isArray(a.value.sensitive_fields)?a.value.sensitive_fields.join(", "):"â€”"),1)])])]),e("div",pe,[t[11]||(t[11]=e("div",{class:"px-5 py-4 border-b border-danger/20 bg-danger-soft"},[e("h3",{class:"text-sm font-semibold text-danger"},"Danger Zone"),e("p",{class:"text-xs text-danger/70 mt-0.5"},"Irreversible actions")],-1)),e("div",fe,[e("div",ye,[e("div",null,[e("h4",ve,[n(s(F),{class:"w-4 h-4 text-warning"}),t[7]||(t[7]=v(" Prune Old Requests",-1))]),t[8]||(t[8]=e("p",{class:"text-xs text-text-muted mt-0.5"},"Delete requests older than the specified days.",-1))]),e("div",ge,[z(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=A=>f.value=A),class:"w-20 text-center",min:"1"},null,512),[[E,f.value]]),e("button",{onClick:M,disabled:s(g),class:u(["px-4 py-2 text-sm font-medium rounded-[10px] transition-all whitespace-nowrap",c.value?"bg-danger text-white hover:bg-red-600":"glass-surface text-text-secondary hover:text-text-primary hover:bg-surface-hover"])},r(c.value?"Confirm Prune":"Prune Now"),11,he)])]),e("div",be,[e("div",null,[e("h4",_e,[n(s(H),{class:"w-4 h-4 text-danger"}),t[9]||(t[9]=v(" Clear All Requests",-1))]),t[10]||(t[10]=e("p",{class:"text-xs text-text-muted mt-0.5"},"Permanently delete ALL recorded data.",-1))]),e("button",{onClick:q,disabled:s(g),class:u(["px-4 py-2 text-sm font-medium rounded-[10px] transition-all whitespace-nowrap",d.value?"bg-danger text-white hover:bg-red-600":"glass-surface text-danger hover:bg-danger-soft"])},r(d.value?"Confirm Clear All":"Clear All Data"),11,we)])])])]))}};export{De as default};

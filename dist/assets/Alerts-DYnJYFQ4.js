import{o as C,f as a,g as l,m as i,q as T,x as c,k as p,l as j,u as n,D as f,y as o,t as m,T as A,j as e,F as E,v as S,b as h}from"./vendor-charts-B6IHGujI.js";import{c as v,B as L,u as q}from"./app-DYKFonEC.js";import{T as y}from"./triangle-alert-D0T3cMjp.js";import{C as B}from"./circle-check-big-NKd45fWs.js";import{C as N}from"./clock-B6b_1CIK.js";import{L as R}from"./loader-circle-wUaqyuXr.js";/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=v("HashIcon",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=v("SendIcon",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=v("ZapIcon",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),z={class:"space-y-6 animate-[fade-in_0.3s_ease]"},F={class:"glass-surface p-5"},H={class:"flex items-center gap-3"},V={class:"flex items-center gap-2"},X={key:0,class:"text-xs text-text-muted mt-0.5"},Z={class:"glass-surface overflow-hidden"},O={class:"divide-y divide-border-subtle"},P={class:"flex items-center justify-between px-5 py-4"},W={class:"flex items-center gap-3"},K={class:"w-8 h-8 rounded-lg bg-accent-soft flex items-center justify-center"},G={class:"text-sm text-text-secondary"},J={class:"flex items-center justify-between px-5 py-4"},Q={class:"flex items-center gap-3"},U={class:"w-8 h-8 rounded-lg bg-danger-soft flex items-center justify-center"},Y={class:"text-sm text-danger font-medium"},$={class:"flex items-center justify-between px-5 py-4"},ee={class:"flex items-center gap-3"},te={class:"w-8 h-8 rounded-lg bg-warning-soft flex items-center justify-center"},se={class:"text-sm text-warning font-medium"},ae={class:"flex items-center justify-between px-5 py-4"},ne={class:"flex items-center gap-3"},le={class:"w-8 h-8 rounded-lg bg-info-soft flex items-center justify-center"},oe={class:"flex gap-1.5"},re={key:0,class:"text-sm text-text-muted italic"},ie={class:"glass-surface p-5"},ce={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},de=["disabled"],xe={key:0,class:"text-xs text-danger mt-3"},_e={__name:"Alerts",setup(ue){const{fetchConfig:b}=q(),s=h({}),d=h(!1),r=h(null),g=(x,t="success")=>{r.value={message:x,type:t},setTimeout(()=>r.value=null,3e3)},w=async()=>{s.value=await b()},k=async()=>{var x;d.value=!0;try{const t=await fetch("/api-watcher/api/actions/test-alert",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":(x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content")}});if(!t.ok){const u=await t.json();throw new Error(u.message||"Failed to send test alert")}g("Test alert sent! Check your channels.")}catch(t){g("Error: "+t.message,"error")}finally{d.value=!1}};return C(w),(x,t)=>{var u;return a(),l("div",z,[i(A,{name:"slide-up"},{default:T(()=>[r.value?(a(),l("div",{key:0,class:c(["fixed top-5 right-5 z-50 flex items-center gap-2 px-4 py-3 rounded-xl text-sm font-medium shadow-lg",r.value.type==="error"?"bg-danger text-white":"bg-success text-text-inverted"])},[(a(),p(j(r.value.type==="error"?n(y):n(B)),{class:"w-4 h-4"})),f(" "+o(r.value.message),1)],2)):m("",!0)]),_:1}),t[7]||(t[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-text-primary"},"Alerts & Monitoring"),e("p",{class:"text-sm text-text-muted mt-0.5"},"Alert configuration and notifications")],-1)),e("div",F,[e("div",H,[e("div",{class:c(["w-10 h-10 rounded-xl flex items-center justify-center",s.value.alerts_enabled?"bg-success-soft":"bg-surface-elevated"])},[i(n(L),{class:c(["w-5 h-5",s.value.alerts_enabled?"text-success":"text-text-muted"])},null,8,["class"])],2),e("div",null,[e("div",V,[t[0]||(t[0]=e("span",{class:"text-sm font-semibold text-text-primary"},"Monitoring",-1)),e("span",{class:c([s.value.alerts_enabled?"bg-success-soft text-success":"bg-surface-elevated text-text-muted","badge text-[11px]"])},[e("span",{class:c(["inline-block w-1.5 h-1.5 rounded-full mr-1.5",s.value.alerts_enabled?"bg-success animate-pulse":"bg-text-muted"])},null,2),f(" "+o(s.value.alerts_enabled?"Active":"Disabled"),1)],2)]),s.value.alerts_enabled?m("",!0):(a(),l("p",X,"Enable in .env with API_WATCHER_ALERTS_ENABLED=true"))])])]),e("div",Z,[t[5]||(t[5]=e("div",{class:"px-5 py-4 border-b border-border-subtle"},[e("h3",{class:"text-sm font-semibold text-text-primary"},"Configuration"),e("p",{class:"text-xs text-text-muted mt-0.5"},"Current alert thresholds")],-1)),e("div",O,[e("div",P,[e("div",W,[e("div",K,[i(n(N),{class:"w-4 h-4 text-accent"})]),t[1]||(t[1]=e("span",{class:"text-sm text-text-primary"},"Check Interval",-1))]),e("span",G,o(s.value.alerts_interval)+" min",1)]),e("div",J,[e("div",Q,[e("div",U,[i(n(y),{class:"w-4 h-4 text-danger"})]),t[2]||(t[2]=e("span",{class:"text-sm text-text-primary"},"Error Rate Threshold",-1))]),e("span",Y,"> "+o(s.value.alerts_threshold_error)+"%",1)]),e("div",$,[e("div",ee,[e("div",te,[i(n(D),{class:"w-4 h-4 text-warning"})]),t[3]||(t[3]=e("span",{class:"text-sm text-text-primary"},"Latency Threshold",-1))]),e("span",se,"> "+o(s.value.alerts_threshold_latency)+"ms",1)]),e("div",ae,[e("div",ne,[e("div",le,[i(n(I),{class:"w-4 h-4 text-info"})]),t[4]||(t[4]=e("span",{class:"text-sm text-text-primary"},"Channels",-1))]),e("div",oe,[(a(!0),l(E,null,S(s.value.alerts_channels,_=>(a(),l("span",{key:_,class:"badge bg-accent-soft text-accent text-[11px] uppercase"},o(_),1))),128)),(u=s.value.alerts_channels)!=null&&u.length?m("",!0):(a(),l("span",re,"None"))])])])]),e("div",ie,[e("div",ce,[t[6]||(t[6]=e("div",null,[e("h3",{class:"text-sm font-semibold text-text-primary"},"Test Notification"),e("p",{class:"text-xs text-text-muted mt-0.5"},"Send a test alert to verify your channels.")],-1)),e("button",{onClick:k,disabled:d.value||!s.value.alerts_enabled,class:c(["flex items-center gap-2 px-4 py-2.5 text-sm font-medium rounded-[10px] transition-all whitespace-nowrap",s.value.alerts_enabled?"bg-accent text-text-inverted hover:bg-accent-hover":"bg-surface-elevated text-text-muted cursor-not-allowed"])},[d.value?(a(),p(n(R),{key:0,class:"w-4 h-4 animate-spin"})):(a(),p(n(M),{key:1,class:"w-4 h-4"})),f(" "+o(d.value?"Sending...":"Send Test"),1)],10,de)]),s.value.alerts_enabled?m("",!0):(a(),l("p",xe,"Enable alerts in configuration first."))])])}}};export{_e as default};

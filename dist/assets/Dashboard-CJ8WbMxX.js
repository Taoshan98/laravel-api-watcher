import{c as E,A as J,u as K}from"./app-DYKFonEC.js";import{T as Q}from"./triangle-alert-D0T3cMjp.js";import{C as X}from"./clock-B6b_1CIK.js";import{o as Y,f as s,g as l,j as t,F as _,v as y,m as b,u as i,y as c,x as m,D as L,k as v,t as A,q as z,b as C,c as p,e as I}from"./vendor-charts-B6IHGujI.js";import{f as Z}from"./formatDistanceToNow-aDLjEcHe.js";/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=E("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=E("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),st={class:"space-y-6 animate-[fade-in_0.3s_ease]"},at={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ot={class:"flex gap-1 p-1 glass-surface rounded-full"},rt=["onClick"],nt={class:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4"},lt={class:"glass-surface card-interactive p-4 md:p-5"},it={class:"flex items-center justify-between mb-3"},ct={class:"w-8 h-8 rounded-lg bg-accent-soft flex items-center justify-center"},dt={key:0,class:"skeleton h-8 w-24 mb-1"},ut={key:1,class:"text-2xl md:text-3xl font-bold text-text-primary"},xt={class:"glass-surface card-interactive p-4 md:p-5"},mt={class:"flex items-center justify-between mb-3"},pt={key:0,class:"skeleton h-8 w-20 mb-1"},ft={class:"glass-surface card-interactive p-4 md:p-5"},ht={class:"flex items-center justify-between mb-3"},bt={class:"w-8 h-8 rounded-lg bg-warning-soft flex items-center justify-center"},gt={key:0,class:"skeleton h-8 w-20 mb-1"},_t={key:1,class:"text-2xl md:text-3xl font-bold text-warning"},vt={class:"glass-surface card-interactive p-4 md:p-5"},yt={class:"flex items-center justify-between mb-3"},kt={class:"w-8 h-8 rounded-lg bg-info-soft flex items-center justify-center"},wt={key:0,class:"skeleton h-8 w-16 mb-1"},Ct={key:1,class:"text-2xl md:text-3xl font-bold text-info"},Dt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},jt={class:"glass-surface p-4 md:p-5"},St={key:0,class:"skeleton h-[280px]"},Rt={class:"glass-surface p-4 md:p-5"},Tt={key:0,class:"skeleton h-[280px]"},Ot={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Lt={class:"glass-surface p-4 md:p-5"},At={key:0,class:"skeleton h-[280px]"},zt={key:2,class:"h-[280px] flex items-center justify-center text-text-muted text-sm"},It={class:"glass-surface p-4 md:p-5"},Et={key:0,class:"skeleton h-[280px]"},Ft={key:2,class:"h-[280px] flex items-center justify-center text-text-muted text-sm"},Mt={class:"glass-surface p-4 md:p-5"},Nt={class:"flex items-center justify-between mb-4"},$t={key:0,class:"space-y-3"},Bt={class:"hidden md:block overflow-x-auto"},Pt={class:"w-full"},Ut=["onClick"],Vt={class:"py-3 pr-4"},qt=["title"],Ht={class:"py-3 pr-4"},Gt={class:"py-3 pr-4 text-sm text-text-secondary"},Wt={class:"py-3 text-sm text-text-muted"},Jt={class:"md:hidden space-y-2"},Kt={class:"flex items-center justify-between mb-1.5"},Qt={class:"flex items-center gap-2"},Xt={class:"text-xs text-text-muted"},Yt={class:"font-mono text-xs text-text-secondary truncate"},Zt={key:2,class:"text-center py-8 text-text-muted text-sm"},ne={__name:"Dashboard",setup(te){const{stats:f,loading:g,fetchStats:F,fetchAnalytics:D,fetchRequests:M,requests:k}=K(),n=C(null),u=C(!0),w=C(30),d={chart:{toolbar:{show:!1},sparkline:{enabled:!1},background:"transparent",fontFamily:"Inter, system-ui, sans-serif"},theme:{mode:"dark"},grid:{borderColor:"rgba(255,255,255,0.06)",strokeDashArray:4,padding:{left:8,right:8}},stroke:{curve:"smooth",width:2},xaxis:{labels:{style:{colors:"#555",fontSize:"11px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#555",fontSize:"11px"}}},tooltip:{theme:"dark"}},N=p(()=>{if(!n.value)return{};const r=Object.keys(n.value.requests_per_day);return{...d,chart:{...d.chart,type:"area",height:280},colors:["#00e5ff"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.25,opacityTo:.02,stops:[0,100]}},xaxis:{...d.xaxis,categories:r,labels:{...d.xaxis.labels,formatter:e=>{if(!e)return"";const a=new Date(e);return`${a.getDate()}/${a.getMonth()+1}`}}},dataLabels:{enabled:!1}}}),$=p(()=>n.value?[{name:"Requests",data:Object.values(n.value.requests_per_day)}]:[]),B=p(()=>{if(!n.value)return{};const r=Object.keys(n.value.error_rate_trend);return{...d,chart:{...d.chart,type:"area",height:280},colors:["#ff1744"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.2,opacityTo:.02,stops:[0,100]}},xaxis:{...d.xaxis,categories:r,labels:{...d.xaxis.labels,formatter:e=>{if(!e)return"";const a=new Date(e);return`${a.getDate()}/${a.getMonth()+1}`}}},yaxis:{...d.yaxis,labels:{...d.yaxis.labels,formatter:e=>(e==null?void 0:e.toFixed(1))+"%"}},dataLabels:{enabled:!1}}}),P=p(()=>n.value?[{name:"Error Rate",data:Object.values(n.value.error_rate_trend)}]:[]),U=p(()=>{if(!n.value)return{};const r=Object.keys(n.value.status_code_distribution),e=r.map(a=>a>=500?"#ff1744":a>=400?"#ffab00":a>=300?"#2979ff":"#00e676");return{chart:{type:"donut",background:"transparent",fontFamily:"Inter, system-ui, sans-serif"},theme:{mode:"dark"},colors:e,labels:r.map(a=>`${a}`),legend:{position:"bottom",labels:{colors:"#8a8a8a"}},stroke:{show:!1},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,total:{show:!0,label:"Total",color:"#8a8a8a",formatter:a=>a.globals.seriesTotals.reduce((h,x)=>h+x,0).toLocaleString()},value:{color:"#f0f0f0",fontSize:"20px",fontWeight:700}}}}},dataLabels:{enabled:!1},tooltip:{theme:"dark"}}}),j=p(()=>n.value?Object.values(n.value.status_code_distribution):[]),V=p(()=>{if(!n.value)return{};const e=n.value.top_slowest_routes.slice(0,8).map(a=>{var h;try{const x=new URL(a.url);return x.pathname.length>30?x.pathname.slice(0,30)+"â€¦":x.pathname}catch{return((h=a.url)==null?void 0:h.slice(0,30))||"unknown"}});return{chart:{type:"bar",background:"transparent",toolbar:{show:!1},fontFamily:"Inter, system-ui, sans-serif"},theme:{mode:"dark"},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"60%"}},colors:["#ffab00"],xaxis:{categories:e,labels:{style:{colors:"#555",fontSize:"11px"},formatter:a=>a+"ms"},axisBorder:{show:!1}},yaxis:{labels:{style:{colors:"#8a8a8a",fontSize:"11px"}}},grid:{borderColor:"rgba(255,255,255,0.06)",strokeDashArray:4},dataLabels:{enabled:!0,style:{fontSize:"11px"},formatter:a=>a+"ms"},tooltip:{theme:"dark",y:{formatter:a=>a+"ms"}}}}),q=p(()=>n.value?[{name:"Avg Duration",data:n.value.top_slowest_routes.slice(0,8).map(e=>e.avg_duration)}]:[]),S=r=>r>=500?"bg-danger-soft text-danger":r>=400?"bg-warning-soft text-warning":r>=300?"bg-info-soft text-info":"bg-success-soft text-success",R=r=>({GET:"bg-info-soft text-info",POST:"bg-success-soft text-success",PUT:"bg-warning-soft text-warning",DELETE:"bg-danger-soft text-danger",PATCH:"bg-accent-soft text-accent"})[r]||"bg-surface-elevated text-text-secondary",T=r=>{try{return new URL(r).pathname}catch{return r}},H=async()=>{u.value=!0,await Promise.all([F(),D(w.value).then(r=>{n.value=r}),M({limit:8})]),u.value=!1},G=r=>{w.value=r,u.value=!0,D(r).then(e=>{n.value=e,u.value=!1})};return Y(H),(r,e)=>{var x,O;const a=I("apexchart"),h=I("router-link");return s(),l("div",st,[t("div",at,[e[0]||(e[0]=t("div",null,[t("h1",{class:"text-2xl font-bold text-text-primary"},"Dashboard"),t("p",{class:"text-sm text-text-muted mt-0.5"},"API monitoring overview")],-1)),t("div",ot,[(s(),l(_,null,y([{label:"7D",value:7},{label:"30D",value:30},{label:"90D",value:90}],o=>t("button",{key:o.value,onClick:W=>G(o.value),class:m(["px-3 py-1.5 text-xs font-medium rounded-full transition-all duration-200",w.value===o.value?"bg-accent text-text-inverted":"text-text-muted hover:text-text-primary"])},c(o.label),11,rt)),64))])]),t("div",nt,[t("div",lt,[t("div",it,[e[1]||(e[1]=t("span",{class:"text-xs font-medium text-text-muted uppercase tracking-wider"},"Requests",-1)),t("div",ct,[b(i(J),{class:"w-4 h-4 text-accent"})])]),i(g)?(s(),l("div",dt)):(s(),l("p",ut,c((x=i(f).total_requests)==null?void 0:x.toLocaleString()),1))]),t("div",xt,[t("div",mt,[e[2]||(e[2]=t("span",{class:"text-xs font-medium text-text-muted uppercase tracking-wider"},"Error Rate",-1)),t("div",{class:m(["w-8 h-8 rounded-lg flex items-center justify-center",i(f).error_rate>5?"bg-danger-soft":"bg-success-soft"])},[b(i(Q),{class:m(["w-4 h-4",i(f).error_rate>5?"text-danger":"text-success"])},null,8,["class"])],2)]),i(g)?(s(),l("div",pt)):(s(),l("p",{key:1,class:m(["text-2xl md:text-3xl font-bold",i(f).error_rate>5?"text-danger":"text-success"])},c(i(f).error_rate)+"% ",3))]),t("div",ft,[t("div",ht,[e[3]||(e[3]=t("span",{class:"text-xs font-medium text-text-muted uppercase tracking-wider"},"Avg Latency",-1)),t("div",bt,[b(i(X),{class:"w-4 h-4 text-warning"})])]),i(g)?(s(),l("div",gt)):(s(),l("p",_t,[L(c(i(f).avg_latency),1),e[4]||(e[4]=t("span",{class:"text-sm font-normal text-text-muted ml-0.5"},"ms",-1))]))]),t("div",vt,[t("div",yt,[e[5]||(e[5]=t("span",{class:"text-xs font-medium text-text-muted uppercase tracking-wider"},"Users",-1)),t("div",kt,[b(i(et),{class:"w-4 h-4 text-info"})])]),i(g)?(s(),l("div",wt)):(s(),l("p",Ct,c(i(f).active_users),1))])]),t("div",Dt,[t("div",jt,[e[6]||(e[6]=t("h3",{class:"text-sm font-semibold text-text-primary mb-4"},"Request Volume",-1)),u.value?(s(),l("div",St)):n.value?(s(),v(a,{key:1,type:"area",height:"280",options:N.value,series:$.value},null,8,["options","series"])):A("",!0)]),t("div",Rt,[e[7]||(e[7]=t("h3",{class:"text-sm font-semibold text-text-primary mb-4"},"Error Rate Trend",-1)),u.value?(s(),l("div",Tt)):n.value?(s(),v(a,{key:1,type:"area",height:"280",options:B.value,series:P.value},null,8,["options","series"])):A("",!0)])]),t("div",Ot,[t("div",Lt,[e[8]||(e[8]=t("h3",{class:"text-sm font-semibold text-text-primary mb-4"},"Status Distribution",-1)),u.value?(s(),l("div",At)):n.value&&j.value.length?(s(),v(a,{key:1,type:"donut",height:"280",options:U.value,series:j.value},null,8,["options","series"])):(s(),l("div",zt," No data available "))]),t("div",It,[e[9]||(e[9]=t("h3",{class:"text-sm font-semibold text-text-primary mb-4"},"Slowest Routes",-1)),u.value?(s(),l("div",Et)):n.value&&((O=n.value.top_slowest_routes)!=null&&O.length)?(s(),v(a,{key:1,type:"bar",height:"280",options:V.value,series:q.value},null,8,["options","series"])):(s(),l("div",Ft," No data available "))])]),t("div",Mt,[t("div",Nt,[e[11]||(e[11]=t("h3",{class:"text-sm font-semibold text-text-primary"},"Recent Requests",-1)),b(h,{to:"/requests",class:"flex items-center gap-1 text-xs font-medium text-accent hover:text-accent-hover transition-colors"},{default:z(()=>[e[10]||(e[10]=L(" View all ",-1)),b(i(tt),{class:"w-3.5 h-3.5"})]),_:1})]),i(g)?(s(),l("div",$t,[(s(),l(_,null,y(5,o=>t("div",{key:o,class:"skeleton h-12"})),64))])):i(k).length?(s(),l(_,{key:1},[t("div",Bt,[t("table",Pt,[e[12]||(e[12]=t("thead",null,[t("tr",{class:"border-b border-border-subtle"},[t("th",{class:"text-left text-[11px] font-medium text-text-muted uppercase tracking-wider pb-3 pr-4"},"Method"),t("th",{class:"text-left text-[11px] font-medium text-text-muted uppercase tracking-wider pb-3 pr-4"},"Path"),t("th",{class:"text-left text-[11px] font-medium text-text-muted uppercase tracking-wider pb-3 pr-4"},"Status"),t("th",{class:"text-left text-[11px] font-medium text-text-muted uppercase tracking-wider pb-3 pr-4"},"Duration"),t("th",{class:"text-left text-[11px] font-medium text-text-muted uppercase tracking-wider pb-3"},"Time")])],-1)),t("tbody",null,[(s(!0),l(_,null,y(i(k).slice(0,8),o=>(s(),l("tr",{key:o.id,class:"border-b border-border-subtle last:border-0 hover:bg-surface-hover transition-colors cursor-pointer",onClick:W=>r.$router.push("/requests/"+o.id)},[t("td",Vt,[t("span",{class:m([R(o.method),"badge text-[11px]"])},c(o.method),3)]),t("td",{class:"py-3 pr-4 font-mono text-sm text-text-secondary truncate max-w-[300px]",title:o.url},c(T(o.url)),9,qt),t("td",Ht,[t("span",{class:m([S(o.status_code),"badge text-[11px]"])},c(o.status_code),3)]),t("td",Gt,c(o.duration_ms)+"ms ",1),t("td",Wt,c(i(Z)(new Date(o.created_at),{addSuffix:!0})),1)],8,Ut))),128))])])]),t("div",Jt,[(s(!0),l(_,null,y(i(k).slice(0,6),o=>(s(),v(h,{key:o.id,to:"/requests/"+o.id,class:"block p-3 rounded-xl bg-surface-elevated hover:bg-surface-hover transition-colors"},{default:z(()=>[t("div",Kt,[t("div",Qt,[t("span",{class:m([R(o.method),"badge text-[10px]"])},c(o.method),3),t("span",{class:m([S(o.status_code),"badge text-[10px]"])},c(o.status_code),3)]),t("span",Xt,c(o.duration_ms)+"ms",1)]),t("p",Yt,c(T(o.url)),1)]),_:2},1032,["to"]))),128))])],64)):(s(),l("div",Zt," No requests recorded yet. "))])])}}};export{ne as default};
